PROJECT(PNDMAN)

FIND_PACKAGE(CURL REQUIRED)
FIND_PACKAGE(OpenSSL REQUIRED)
FIND_PACKAGE(EXPAT REQUIRED)

file (GLOB_RECURSE pndman_SOURCES src/lib/*.c)
file (GLOB_RECURSE pndman_HEADERS src/lib/*.h)
SET(pndman_INCLUDES src/include/pndman.h)

INCLUDE_DIRECTORIES(src/lib/)
INCLUDE_DIRECTORIES(${JANSSON_BINARY_DIR}/include/ ${OpenSSL_INCLUDE_DIR} ${CURL_INCLUDE_DIR})
LINK_DIRECTORIES(${LINK_DIRECTORIES} ${OpenSSL_LIBRARY_DIRS} ${CURL_LIBRARY_DIRS})
FILE(COPY ${pndman_INCLUDES} DESTINATION include)
ADD_DEFINITIONS(-fPIC)
ADD_LIBRARY(pndman ${pndman_SOURCES} ${pndman_HEADERS})
target_link_libraries(pndman jansson ${CURL_LIBRARIES} ${OPENSSL_LIBRARIES} ${EXPAT_LIBRARIES})
